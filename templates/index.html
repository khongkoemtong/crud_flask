<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.js"></script>
</head>

<body>

    <div class="d-flex justify-content-end m-5">
        <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#hello">Add user </button>
    </div>

    <div class="d-flex fw-bold justify-content-center mt-3">
        <table class="table w-75 align-middle table-bordered">
            <thead>
                <tr class="text-center">
                    <th scope="col">ID</th>
                    <th>Image</th>
                    <th scope="col">Name</th>
                    <th scope="col">Age</th>
                    <th scope="col">Gender</th>
                    <th scope="col">Salary</th>
                    <th scope="col">
                        Action
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for user in myuser %}
                <tr class="text-center">
                    <th scope="row">{{user[0]}}</th>
                    <td>
                        {%if user[5]%}
                        <img width="50" src="{{url_for('static' ,filename='uploads/' + user[5])}}" alt="">
                        {%else%}
                        <img width="50" src="{{url_for('static' ,filename='uploads/default.png' )}}" alt="">
                        {%endif%}
                    </td>
                    <td>{{user[1]}}</td>
                    <td>{{user[2]}}</td>
                    <td>{{user[3]}}</td>
                    <td>{{user[4]}}</td>
                    <td class="   gap-2  ">
                        <button class="btn btn-warning" data-bs-toggle="modal"
                            data-bs-target="#update{{user[0]}}">Update</button>
                        <button class="btn btn-danger" data-bs-toggle="modal"
                            data-bs-target="#delete{{user[0]}}">Delete</button>
                    </td>
                </tr>



                <div class="modal fade" id="hello">
                    <div class="modal-dialog p-3">
                        <div class="modal-content p-5">
                            <form action="/insert" method="post" enctype="multipart/form-data">
                                <p class="text-center">Insert user</p>
                                <div>
                                    <label for="" class="form-label">Enter name </label>
                                    <input type="text" name="hello" class="form-control">
                                </div>
                                <div>
                                    <label for="" class="form-label">Enter age </label>
                                    <input type="number" name="age" class="form-control">
                                </div>

                                <div>
                                    <label for="" class="form-label">Enter gender</label>
                                    <select name="gender" id="" class="form-control">
                                        <option value="male">male</option>
                                        <option value="female">female</option>

                                    </select>
                                </div>

                                <div>
                                    <label for="" class="form-label">Enter Salary </label>
                                    <input type="number" name="salary" value="{{user[4]}}" class="form-control">
                                </div>
                                <div>
                                    <label for="" class="form-label">Enter Image </label>
                                    <input type="file" name="image" id="imageinput" value="{{user[4]}}"
                                        class="form-control">
                                </div>
                                <div class="d-flex justify-content-center mt-3">
                                    <img width="200px"
                                        src="https://i.pinimg.com/736x/be/10/f2/be10f2ad416ee5f38eefa35cf10e5f18.jpg"
                                        id="preview" alt="">
                                </div>

                                <div class="mt-5">
                                    <button type="submit" class="btn btn-primary">Add user</button>
                                </div>

                            </form>
                        </div>
                    </div>

                </div>
                <div class="modal fade" id="update{{user[0]}}">

                    <div class="modal-dialog p-3">
                        <div class="modal-content p-5">
                            <form action="/update" method="post">
                                <p class="text-center">update myuser</p>
                                <input type="hidden" name="id" class="form-control" value="{{user[0]}}">
                                <div>
                                    <label for="" class="form-label">Enter name </label>
                                    <input type="text" value="{{ user[1] }}" name="name" class="form-control">
                                </div>
                                <div>
                                    <label for="" class="form-label">Enter age </label>
                                    <input type="number" value="{{ user[2] }}" name="age" class="form-control">
                                </div>

                                <div>
                                    <label for="" class="form-label">Enter gender</label>
                                    <select name="gender" value="{{ user[3] }}" id="" class="form-control">
                                        <option value="male">male</option>
                                        <option value="female">female</option>

                                    </select>
                                </div>

                                <div>
                                    <label for="" class="form-label">Enter Salary </label>
                                    <input type="number" value="{{ user[4] }}" name="salary" class="form-control">
                                </div>

                                <div class="mt-5">
                                    <button type="submit" class="btn btn-primary">Add user</button>
                                </div>

                            </form>
                        </div>
                    </div>

                </div>
                <div class="modal fade " id="delete{{user[0]}}">
                    <div class="modal-dialog">
                        <div class="modal-content p-5 ">
                            <h3 class="text-center">Are you sure to delete {{user[1]}} ?</h3>
                            <form action="/delete" method="post">
                                <input type="hidden" name="id" value="{{user[0]}}">

                                <div class="d-flex mt-5 justify-content-center gap-2 ">
                                    <button class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
                                    <button class="btn btn-danger" type="submit">Delete</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>


                {%endfor%}

                <script>
                    $('#imageinput').change(function () {
                        const file = this.files[0]
                        if (file) {
                            $("#preview").attr('src', URL.createObjectURL(file))
                        }
                    })
                </script>




            </tbody>
        </table>
    </div>



</body>

</html>